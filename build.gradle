buildscript {
   	repositories {
  		mavenCentral()
      	maven {
           	name = "forge"
           	url = "http://files.minecraftforge.net/maven"
  		}
       		maven {
           	name = "sonatype"
           	url = "https://oss.sonatype.org/content/repositories/snapshots/"
       	}
   	}
   		dependencies {
       	classpath 'net.minecraftforge.gradle:ForgeGradle:1.2-SNAPSHOT'
	}	
}	

task build 
task clean
task setup
task eclipse
task idea

version = "MC${minecraft_version}-${mod_version}-${System.getenv().BUILD_NUMBER}"

subprojects {
	apply plugin: "forge"

    rootProject.build.dependsOn build
    rootProject.clean.dependsOn clean
    rootProject.setup.dependsOn setupDecompWorkspace
    rootProject.tasks.eclipse.dependsOn it.tasks.eclipse
    rootProject.tasks.idea.dependsOn it.tasks.idea

	// stuff specific to my mod
	group = 'org.wyldmods.kitchencraft'
	archivesBaseName = rootProject.name + "-" + project.name

	version = "${minecraft.version}-$version.${System.getenv().BUILD_NUMBER}"

	minecraft {
    	version = "${minecraft_version}-${forge_version}"
		runDir = 'run'
	}

	processResources 
	{
    	// replace stuff in mcmod.info, nothing else
    	from(sourceSets.main.resources.srcDirs) {
        	include 'mcmod.info'
                
	        // replace version and mcversion
    	    expand 'version':project.version, 'mcversion':project.minecraft.version
    	}
        
    	// copy everything else, thats not the mcmod.info
    	from(sourceSets.main.resources.srcDirs) {
        	exclude 'mcmod.info'
    	}
	}

	version = rootProject.version

	jar.destinationDir = new File(rootProject.projectDir, "output")
	
	repositories {
		maven { // ttCore
			name 'tterrag Repo'
			url "http://maven.tterrag.com"
		}
	}

	dependencies {
		compile "tterrag.core:ttCore:1.7.10-0.0.2-5"
	}

	it.sourceSets {
		main {
			java {
				srcDir rootProject.projectDir.path + "/src/main/java"
			}
			resources {
				srcDir rootProject.projectDir.path + "/src/main/resources"
			}
		}
	}
}